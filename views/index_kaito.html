<!DOCTYPE html>
<%
    # i18n ÏÇ¨Ï†Ñ ÏÑ§Ï†ï
    i18n = {
        'ko': {
            'user_analysis': 'ÏÇ¨Ïö©Ïûê Î∂ÑÏÑù',
            'leaderboard_analysis': 'Î¶¨ÎçîÎ≥¥Îìú Î∂ÑÏÑù',
            'alias_form': 'Î≥ÑÎ™Ö ÎòêÎäî Ìï∏Îì§ ÏûÖÎ†•',
            'search_placeholder': 'ÏÇ¨Ïö©Ïûê Í≤ÄÏÉâ (Ïù¥Î¶Ñ ÎòêÎäî ID)',
            'close': 'Îã´Í∏∞',
            'copy_success': 'ÏßÄÍ∞ë Ï£ºÏÜåÍ∞Ä Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§! ü¶à',
            'click_to_copy': 'ÌÅ¥Î¶≠ÌïòÏó¨ Ï£ºÏÜå Î≥µÏÇ¨ ü¶à'
        },
        'en': {
            'user_analysis': 'User Analysis',
            'leaderboard_analysis': 'Leaderboard',
            'alias_form': 'Enter a nickname or handle',
            'search_placeholder': 'Search users (Name or ID)',
            'close': 'Close',
            'copy_success': 'Wallet address copied! ü¶à',
            'click_to_copy': 'Click to copy addressü¶à'
        }
    }
    t = i18n.get(lang, i18n['ko'])
%>
<html lang="{{lang}}">
% include('_head.html')
</head>
<body>
% include('_navbar.html')

    <div class="container mt-4 chart-relative" id="chartCardBody">
<!-- ÏÇ¨Ïö©Ïûê Í≤ÄÏÉâ -->
<div class="chart-container" >
		<div id="chart-loading-overlay" class="chart-loading-overlay">
			Îç∞Ïù¥ÌÑ∞ Î°úÎî© Ï§ë...
		</div>
    <div class="card">
        <div class="card-header">
            <h3><img src="/static/kaito.png" alt="Kaito" style="width: 24px; height: 24px;"> {{projectname.upper()}} {{t['user_analysis']}}</h3>
        </div>
		<div class="card-body">
            <div class="mb-3">
                <input type="text" class="form-control" id="userSearch" placeholder="{{t['alias_form']}}">
            </div>
            <div class="list-group" style="max-height: 300px; overflow-y: auto;">
                % for user in all_users:
                    <a href="/kaito/{{projectname}}/user/{{user['handle']}}" 
                       class="list-group-item list-group-item-action user-item" 
                       data-handle="{{user['handle']}}"
                       data-displayname="{{user['displayName']}}">
                        <strong>{{user['displayName']}}</strong> <span class="text-muted">@{{user['handle']}}</span>
                    </a>
                % end
            </div>
        </div>
    </div>
</div>

<script>
// User search functionality
document.getElementById('userSearch').addEventListener('input', function(e) {
    const searchTerm = e.target.value.toLowerCase();
    const userItems = document.querySelectorAll('.user-item');
    
    userItems.forEach(item => {
        const handle = item.dataset.handle.toLowerCase();
        const displayName = item.dataset.displayname.toLowerCase();
        if (handle.includes(searchTerm) || displayName.includes(searchTerm)) {
            item.style.display = 'block';
        } else {
            item.style.display = 'none';
        }
    });
});
</script>

% include('_footer.html')
</body>
</html>
